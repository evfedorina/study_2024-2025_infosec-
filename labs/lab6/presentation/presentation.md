---
## Front matter
lang: ru-RU
title: Лабораторная работа №6
subtitle: Мандатное разграничение прав в Linux
author:
  - Федорина Эрнест Васильевич
institute:
  - Российский университет дружбы народов, Москва, Россия

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="45%"}

  * Федорина Эрнест Васильевич
  * студент
  * Российский университет дружбы народов
  * [1032216454@pfur.ru](mailto:1032216454@pfur.ru)
  * <https://evfedorina.github.io/ru/>

:::
::: {.column width="25%"}

![](./image/ernest.jpg)

:::
::::::::::::::

## Цель работы

Развить навыки администрирования ОС Linux. Получить первое практическое знакомство с технологией SELinux.
Проверить работу SELinx на практике совместно с веб-сервером Apache.

## Теоретическое введение

Apache HTTP-сервер (в иронической трактовке является искажённым сокращением от англ. a patchy server; среди русских пользователей общепринято переводное апа́ч) — свободный веб-сервер.

# Выполнение лабораторной работы

## Организация рабочего стенда

Для начала организуем рабочий стренд, - установим apache, проверим используемый режим и политику, а также отключим некоторые пакетные фильтры (рис. [-@fig:001])

![начало работы с selinux](image/1.png){#fig:001 width=45%}

## Старт работы веб-сервера

Увидели, что веб-сервер не работает (рис. [-@fig:002]), включили его (рис. [-@fig:003]) и посмотрели контекст безопасности (рис. [-@fig:004])

![статус enforce и работы веб-сервера](image/2.png){#fig:002 width=40%}

## Старт работы веб-сервера

![активный веб-сервер](image/3.png){#fig:003 width=60%}

## Старт работы веб-сервера

![контекст безопасности](image/4.png){#fig:004 width=60%}

## Просмотр состояния переключателей

Потом посмотрели состояние переключателей (рис. [-@fig:005])

![состояние переключателей SELinux](image/5.png){#fig:005 width=45%}

## Статистика по политике

Далее посмотрим статистику по политике (рис. [-@fig:006])

![статистика по политике](image/6.png){#fig:006 width=45%}

## Старт работы веб-сервера

У нас 8 пользователей, 5169 типов и 15 ролей.

## Начало работы с файлом test.html

Определим тип файлов в директории /var/www/html, создадим там файл test.html и проверим его контекст (рис. [-@fig:007])

![работа с директорией html](image/7.png){#fig:007 width=45%}

## Начало работы с файлом test.html

Обратимся к файлу через веб-сервер и увидим там текст, написанный нами ранее в файле test.html, доступ есть (рис. [-@fig:008])

![открытие test.html через веб-сервер](image/8.png){#fig:008 width=45%}

## Работа с контекстами

Изучив справку httpd_selinux мы выяснили нужные контексты, сопоставили их с контекстами нашего файла, рассмотреои полученный контекст детально, а потом изменили контекст файла, чтобы процесс httpd не имел доступа к файлу (рис. [-@fig:009])

## Работа с контекстами

![просмотр и изменение контекста файла](image/9.png){#fig:009 width=60%}

## Просмотр log-файлов

Смотрим log-файлы веб-сервера и системные логи (рис. [-@fig:010])

![просмотр log-файлов](image/10.png){#fig:010 width=45%}

## Просмотр log-файлов и изменение параметра listen

В httpd.conf изменили параметр listen с 80 на 81, потом перезапустили веб-сервер, произошёл сбой.

Далее мы опять посмотрели log-файлы (рис. [-@fig:011])

## Просмотр log-файлов и изменение параметра listen

![просмотр новых log-файлов](image/11.png){#fig:011 width=60%}

## Использование команды semanage port и просмотр log-файлов

Выполнили команду semanage port, проверили список портов и увидели там 81, а затем снова запустили веб-сервер Apache, успешно (рис. [-@fig:012])

![просмотр новых log-файлов](image/12.png){#fig:012 width=45%}

## Завершение лабораторной работы

В конце лабораторной работы убрали все изменения в файлах, удалили test.html и удалили привязку httpd_port_t к 81 порту


# Выводы

Развили навыки администрирования ОС Linux. Получили первое практическое знакомство с технологией SELinux.
Проверили работу SELinx на практике совместно с веб-сервером Apache.


# Список литературы:

1. Apache[Электронный ресурс] - https://ru.wikipedia.org/wiki/Apache
